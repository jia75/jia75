<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Epilepsy Testing Suite</title>
</head>
<body style="margin: 0; overflow: hidden;">
    <h1 style="text-align: center;">Epilepsy Testing Suite (Premium Edition)</h1>
    <button onclick="document.getElementById('c').style.display='block';let audio = document.createElement('audio');audio.src = 'amenbreak.wav';
  audio.loop = true;
  audio.play();
">I pinky promise that I know that I don't have epilepsy and that if I actually didn't fully know or like I developed epilepsy some time since I last did some kind of test for it I forfeit my rights to take any kind of action against the author of this product and by extent any organization, for profit or otherwise, that may have aided them in the process of creating said product, as I acknowledge that it will be entirely my fault that I did not get a more recent or advanced test for the condition of photosensitive epilepsy or any other conditions that may have similar symptoms to it. And I am not crossing my fingers behind my back like I'm being so fr when I am clicking this button to agree with the statement which I have definitely read in full.</button>
<canvas id="c" style="display: none"></canvas>
<script>
const gl = c.getContext('webgl')
c.width = innerWidth
c.height = innerHeight
gl.viewport(0,0,c.width,c.height)

const vs = `
attribute vec4 position;
void main() {
  gl_Position = position;
}`

const fs = `
precision mediump float;
uniform float iTime;
uniform vec2 iResolution;

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
    vec2 uv = fragCoord / iResolution.xy;
    float beat1 = step(0.5, fract(iTime * 12.0));
    float beat2 = step(0.7, fract(iTime * 48.0));
    float beat3 = step(0.3, fract(iTime * 96.0));
    float glitchR = step(0.6, fract(sin(iTime * 123.0 + uv.x * 1000.0) * 43758.5453));
    float glitchG = step(0.7, fract(sin(iTime * 456.0 + uv.y * 800.0) * 24634.6345));
    float glitchB = step(0.65, fract(sin(iTime * 789.0 + (uv.x + uv.y) * 900.0) * 56473.2345));
    float intensity = beat1 + beat2 * 1.5 + beat3 * 2.0;
    vec3 glitchColor = vec3(glitchR, glitchG, glitchB) * intensity;
    float flash = step(0.5, fract(iTime * 80.0));
    vec3 flashColor = mix(vec3(1.0, 0.2, 0.5), vec3(0.0, 0.8, 1.0), flash);
    vec3 color = mix(glitchColor, flashColor, 0.8);
    fragColor = vec4(color, 1.0);
}

void main() {
  mainImage(gl_FragColor, gl_FragCoord.xy);
}`

function compile(type, src) {
  const s = gl.createShader(type)
  gl.shaderSource(s, src)
  gl.compileShader(s)
  if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(s)
  return s
}

const prog = gl.createProgram()
gl.attachShader(prog, compile(gl.VERTEX_SHADER, vs))
gl.attachShader(prog, compile(gl.FRAGMENT_SHADER, fs))
gl.linkProgram(prog)
if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) throw gl.getProgramInfoLog(prog)
gl.useProgram(prog)

const buf = gl.createBuffer()
gl.bindBuffer(gl.ARRAY_BUFFER, buf)
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1,1,-1,-1,1,1,1]), gl.STATIC_DRAW)
const loc = gl.getAttribLocation(prog, 'position')
gl.enableVertexAttribArray(loc)
gl.vertexAttribPointer(loc, 2, gl.FLOAT, false, 0, 0)

const timeLoc = gl.getUniformLocation(prog, 'iTime')
const resLoc = gl.getUniformLocation(prog, 'iResolution')

function render(t) {
  gl.uniform1f(timeLoc, t * 0.001)
  gl.uniform2f(resLoc, c.width, c.height)
  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)
  requestAnimationFrame(render)
}
requestAnimationFrame(render)
</script>
</body>
</html>